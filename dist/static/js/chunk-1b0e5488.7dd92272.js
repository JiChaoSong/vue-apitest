(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b0e5488"],{"0323":function(e,t,a){"use strict";var s=a("66a0"),l=a.n(s);l.a},"29c8":function(e,t,a){},"33da":function(e,t,a){},"42c1":function(e,t,a){"use strict";var s=a("29c8"),l=a.n(s);l.a},4489:function(e,t,a){"use strict";var s=a("4ea3"),l=a.n(s);l.a},"4ea3":function(e,t,a){},"538a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"api-container"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"API详情",name:"first"}},[a("api-desc",{attrs:{"api-infomation":e.apiInfomation,response:e.response}})],1),a("el-tab-pane",{attrs:{label:"在线调试",name:"second"}},[a("api-test",{attrs:{testapiinfo:e.testapiinfo}})],1),a("el-tab-pane",{attrs:{label:"测试用例",name:"third"}},[a("api-case",{attrs:{list:e.list,"list-query":e.listQuery,total:e.total,"fetch-data":e.fetchData,testapiinfo:e.testapiinfo}})],1)],1)],1)},l=[],n=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"name"},[a("h3",[a("span",[e._v(e._s(e.apiInfomation.apiName))])])]),a("div",{staticClass:"path"},[a("h4",[e._v(e._s(e.apiInfomation.apiPath))])]),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"请求参数",name:"1"}},[a("el-table",{attrs:{data:e.apiInfomation.apiBody,border:""}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{label:"参数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.param))]}}])}),a("el-table-column",{attrs:{label:"类型",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.type))]}}])}),a("el-table-column",{attrs:{label:"必填",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.isBoolean))]}}])}),a("el-table-column",{attrs:{label:"说明",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.desc))]}}])}),a("el-table-column",{attrs:{label:"示例",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.example))]}}])}),a("el-table-column",{attrs:{label:"备注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.remark))]}}])})],1)],1)],1),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"返回示例",name:"2"}},[a("div",{staticClass:"response"},[a("span",{staticClass:"resp-name"},[a("JsonViewer",{attrs:{value:e.response,"expand-depth":20,copyable:"","font-size":20}})],1)])])],1)],1)}),i=[],r=a("349e"),o=a.n(r),c={name:"ApiDesc",components:{JsonViewer:o.a},props:{apiInfomation:{type:Object,required:!0},response:{type:Object,required:!0}},data:function(){return{activeNames:["1"]}},created:function(){},methods:{}},u=c,p=(a("f271"),a("2877")),d=Object(p["a"])(u,n,i,!1,null,null,null),m=d.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"path-button"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:19}},[a("el-input",{model:{value:e.requestData.apiPath,callback:function(t){e.$set(e.requestData,"apiPath",t)},expression:"requestData.apiPath"}},[a("el-select",{staticClass:"select-method",attrs:{slot:"prepend"},slot:"prepend",model:{value:e.requestData.apiMethod,callback:function(t){e.$set(e.requestData,"apiMethod",t)},expression:"requestData.apiMethod"}},e._l(e.methons,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:!e.isEnble}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"success"},on:{click:e.handleCreateCase}},[e._v("新建用例")])],1),a("el-col",{attrs:{span:12}},[a("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:e.subcommit,command:e.handleConmand}},[e._v(" 测试 "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"save"}},[e._v("保存并测试")])],1)],1)],1)],1)],1)],1)],1),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"Request",name:"1"}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName1,callback:function(t){e.activeName1=t},expression:"activeName1"}},[a("el-tab-pane",{attrs:{label:"Query参数",name:"first"}},[a("common",{attrs:{"request-data":e.requestData.apiParams}})],1),a("el-tab-pane",{attrs:{label:"请求头",name:"second"}},[a("common",{attrs:{"request-data":e.requestData.apiHeaders,lables:"header"}})],1),a("el-tab-pane",{attrs:{label:"请求体",name:"third"}},[a("common",{attrs:{"request-data":e.requestData.apiBody,lables:"body"}})],1),a("el-tab-pane",{attrs:{label:"参数提取",name:"four"}},[a("extraction",{attrs:{list:e.requestData.paramExtrat}})],1),a("el-tab-pane",{attrs:{label:"断言",name:"six"}},[a("assertions",{attrs:{"api-assert":e.requestData.apiAssert}})],1)],1)],1)],1),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"Response",name:"2"}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.responseName,callback:function(t){e.responseName=t},expression:"responseName"}},[a("el-tab-pane",{attrs:{label:"响应头",name:"first"}},[a("JsonViewer",{staticStyle:{width:"70%"},attrs:{value:e.testResult.responseHeader,"expand-depth":20,copyable:"","font-size":20}})],1),a("el-tab-pane",{attrs:{label:"响应体",name:"second"}},[a("JsonViewer",{attrs:{value:e.testResult.responseBody,"expand-depth":20,copyable:"","font-size":20}})],1),a("el-tab-pane",{attrs:{label:"请求头",name:"third"}},[a("JsonViewer",{attrs:{value:e.testResult.requestHeader,"expand-depth":20,copyable:"","font-size":20}})],1),a("el-tab-pane",{attrs:{label:"请求体",name:"four"}},[a("JsonViewer",{attrs:{value:e.testResult.requestBody,"expand-depth":20,copyable:"","font-size":20}})],1),a("el-tab-pane",{attrs:{label:"参数提取结果",name:"fine"}},[a("JsonViewer",{attrs:{value:e.testResult.extrationResult,"expand-depth":20,"font-size":20,copyable:""}})],1),a("el-tab-pane",{attrs:{label:"断言结果",name:"six"}},[a("p",{staticStyle:{color:"#999999"}},[e._v("* 0:成功, 1:失败, 2: 错误*")]),a("span",[e._v(e._s(e.testResult.assertRestlt))])])],1)],1)],1),a("el-dialog",{staticClass:"create-case-dialog",attrs:{title:"测试用例",visible:e.dialogvisibleForm,width:"1200px"},on:{"update:visible":function(t){e.dialogvisibleForm=t}}},[a("el-form",{ref:"caseDataForm",attrs:{model:e.caseData,rules:e.caseDataRule,"label-position":"top"}},[a("el-form-item",{attrs:{label:"用例名称",prop:"caseName"}},[a("el-input",{model:{value:e.caseData.caseName,callback:function(t){e.$set(e.caseData,"caseName",t)},expression:"caseData.caseName"}})],1),a("el-form-item",{attrs:{label:"ApiPath"}},[a("el-input",{model:{value:e.requestData.apiPath,callback:function(t){e.$set(e.requestData,"apiPath",t)},expression:"requestData.apiPath"}},[a("el-select",{staticClass:"select-method",attrs:{slot:"prepend"},slot:"prepend",model:{value:e.requestData.apiMethod,callback:function(t){e.$set(e.requestData,"apiMethod",t)},expression:"requestData.apiMethod"}},e._l(e.methons,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-form-item",{attrs:{label:"请求参数"}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.caseActiveName,callback:function(t){e.caseActiveName=t},expression:"caseActiveName"}},[a("el-tab-pane",{attrs:{label:"Query参数",name:"first"}},[a("common",{attrs:{"request-data":e.caseData.apiParams}})],1),a("el-tab-pane",{attrs:{label:"请求头",name:"second"}},[a("common",{attrs:{"request-data":e.caseData.apiHeaders,lables:"header"}})],1),a("el-tab-pane",{attrs:{label:"请求体",name:"third"}},[a("common",{attrs:{"request-data":e.caseData.apiBody,lables:"body"}})],1),a("el-tab-pane",{attrs:{label:"参数提取",name:"four"}},[a("extraction",{attrs:{list:e.caseData.paramExtrat}})],1)],1)],1),a("el-form-item",{attrs:{label:"断言"}},[a("div",{staticClass:"assert-style"},[a("div",{staticClass:"radio-style"},[a("el-radio-group",{model:{value:e.assertActive,callback:function(t){e.assertActive=t},expression:"assertActive"}},e._l(e.assertype,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value,disabled:t.disabled}},[e._v(e._s(t.label))])})),1)],1),a("div",{staticClass:"select-assert"},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:102===e.assertActive,expression:"assertActive === 102"}],attrs:{label:"http状态码"}},[a("el-select",{model:{value:e.caseData.apiAssert.httpcode,callback:function(t){e.$set(e.caseData.apiAssert,"httpcode",t)},expression:"caseData.apiAssert.httpcode"}},e._l(e.httpcode,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:103===e.assertActive,expression:"assertActive === 103"}],attrs:{label:"响应code"}},[a("el-select",{model:{value:e.caseData.apiAssert.responsecode,callback:function(t){e.$set(e.caseData.apiAssert,"responsecode",t)},expression:"caseData.apiAssert.responsecode"}},e._l(e.respcode,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:104===e.assertActive,expression:"assertActive===104"}],attrs:{label:"匹配的值"}},[a("el-input",{model:{value:e.caseData.apiAssert.fullMatch,callback:function(t){e.$set(e.caseData.apiAssert,"fullMatch",t)},expression:"caseData.apiAssert.fullMatch"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:105===e.assertActive,expression:"assertActive===105"}],attrs:{label:"响应时间"}},[a("el-input",{model:{value:e.caseData.apiAssert.responseTime,callback:function(t){e.$set(e.caseData.apiAssert,"responseTime",t)},expression:"caseData.apiAssert.responseTime"}})],1)],1)])]),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.createCase}},[e._v("保存")])],1)],1)],1)],1)},v=[],b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-table",{attrs:{data:e.requestData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{label:"参数名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["header"!==e.lables?a("el-input",{model:{value:t.row.param,callback:function(a){e.$set(t.row,"param",a)},expression:"scope.row.param"}}):a("el-select",{attrs:{filterable:"","allow-create":""},on:{blur:function(a){return e.searchBlur(t.row,a)}},model:{value:t.row.param,callback:function(a){e.$set(t.row,"param",a)},expression:"scope.row.param"}},e._l(e.headerSelect,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.value}})})),1)]}}])}),"body"===e.lables?a("el-table-column",{attrs:{label:"类型",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"","allow-create":""},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.datatype,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)]}}],null,!1,346480868)}):e._e(),a("el-table-column",{attrs:{label:"参数值",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"说明",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",a)},expression:"scope.row.desc"}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index===e.requestData.length-1?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addline(e.requestData)}}},[e._v("新增")]):e._e(),1!==e.requestData.length?a("el-button",{staticStyle:{color:"#f95359"},attrs:{type:"text"},on:{click:function(a){return e.deleteline(t.$index,e.requestData)}}},[e._v("删除")]):e._e()]}}])})],1)],1)},h=[],y=(a("a434"),a("08f3")),D={name:"common",props:{requestData:{type:Array,require:!0},lables:String},data:function(){return{datatype:y["a"].paramType,headerSelect:this.allEnums.requestHeader,list:this.requestData}},created:function(){console.log(this.requestData)},methods:{searchBlur:function(e,t){e.param=t.target.value},addline:function(e){e.push({param:null,desc:null,type:"String",value:null})},deleteline:function(e,t){t.splice(e,1)}}},g=D,x=(a("6581"),Object(p["a"])(g,b,h,!1,null,"b15e7876",null)),w=x.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),a("el-table-column",{attrs:{label:"类型",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.paramextrat,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label,disabled:!e.isEnble}})})),1)]}}])}),a("el-table-column",{attrs:{label:"变量名",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.label,callback:function(a){e.$set(t.row,"label",a)},expression:"scope.row.label"}})]}}])}),a("el-table-column",{attrs:{label:"表达式",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.expression,callback:function(a){e.$set(t.row,"expression",a)},expression:"scope.row.expression"}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index===e.list.length-1?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addline(e.list)}}},[e._v("新增")]):e._e(),1!==e.list.length?a("el-button",{staticStyle:{color:"#f95359"},attrs:{type:"text"},on:{click:function(a){return e.deleteline(t.$index,e.list)}}},[e._v("删除")]):e._e()]}}])})],1)},_=[],k={name:"Extration",props:{list:Array},data:function(){return{paramextrat:this.allEnums.patamExtraction,jsonpath_expression:"$..变量名",regular_expression:"参考python的正则表达式"}},methods:{addline:function(e){e.push({type:101,label:null,expression:null})},deleteline:function(e,t){t.splice(e,1)}}},C=k,N=(a("0323"),Object(p["a"])(C,A,_,!1,null,"d2c07f46",null)),q=N.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{attrs:{model:e.apiAssert}},[a("el-form-item",[a("div",{staticClass:"assert-style"},[a("div",{staticClass:"radio-style"},[a("el-radio-group",{model:{value:e.apiAssert.type,callback:function(t){e.$set(e.apiAssert,"type",t)},expression:"apiAssert.type"}},e._l(e.assertype,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value,disabled:t.disabled}},[e._v(e._s(t.label))])})),1)],1),a("div",{staticClass:"select-assert"},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:102===e.apiAssert.type,expression:"apiAssert.type === 102"}],attrs:{label:"http状态码"}},[a("el-select",{model:{value:e.apiAssert.httpcode,callback:function(t){e.$set(e.apiAssert,"httpcode",t)},expression:"apiAssert.httpcode"}},e._l(e.httpcode,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:103===e.apiAssert.type,expression:"apiAssert.type === 103"}],attrs:{label:"响应code"}},[a("el-select",{model:{value:e.apiAssert.responsecode,callback:function(t){e.$set(e.apiAssert,"responsecode",t)},expression:"apiAssert.responsecode"}},e._l(e.respcode,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:104===e.apiAssert.type,expression:"apiAssert.type===104"}],attrs:{label:"匹配的值"}},[a("el-input",{model:{value:e.apiAssert.fullMatch,callback:function(t){e.$set(e.apiAssert,"fullMatch",t)},expression:"apiAssert.fullMatch"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:105===e.apiAssert.type,expression:"apiAssert.type===105"}],attrs:{label:"响应时间"}},[a("el-input",{model:{value:e.apiAssert.responseTime,callback:function(t){e.$set(e.apiAssert,"responseTime",t)},expression:"apiAssert.responseTime"}})],1)],1)])])],1)},S=[],E={name:"assertions",props:{apiAssert:Object},data:function(){return{assertype:this.allEnums.assertType,httpcode:this.allEnums.httpCode,respcode:this.allEnums.responseCode,assertActive:101}}},j=E,O=(a("42c1"),Object(p["a"])(j,$,S,!1,null,"6150e4a9",null)),M=O.exports,P=a("811c"),T=a("fa20"),R=a("d4f4"),B={name:"ApiTest",props:{testapiinfo:{type:Object,required:!0}},components:{common:w,JsonViewer:o.a,extraction:q,assertions:M},data:function(){return{methons:this.allEnums.requestMethod,assertype:this.allEnums.assertType,httpcode:this.allEnums.httpCode,respcode:this.allEnums.responseCode,assertActive:101,activeName1:"third",caseActiveName:"first",responseName:"second",testResult:{},caseData:{id:void 0,caseNum:"",caseName:"",caseDesc:"",apiParams:null,apiHeaders:null,apiBody:null,paramExtrat:null,apiAssert:{type:this.assertActive,httpcode:null,responsecode:null,responseTime:null,fullMatch:null},createdUser:this.user,updatedUser:this.user,interface:this.$route.query.id},caseDataRule:{caseName:[{required:!0,message:"请输入用例名称",trigger:"blur"}]},dialogvisibleForm:!1,activeNames:["1","2"]}},created:function(){},computed:{requestData:function(){var e=this.testapiinfo;return null===e.apiParams&&(e.apiParams=[{param:null,desc:null,type:"String",value:null}]),null===e.apiHeaders&&(e.apiHeaders=[{param:null,desc:null,type:"String",value:null}]),null===e.apiBody&&(e.apiBody=[{param:null,desc:null,type:"String",value:null}]),null===e.paramExtrat&&(e.paramExtrat=[{type:101,label:null,expression:null}]),null===e.apiAssert&&(e.apiAssert={type:101,httpcode:null,responsecode:null,responseTime:null,fullMatch:null}),e},user:function(){return Object(T["a"])()}},methods:{subcommit:function(){var e=this;Object(P["f"])(this.requestData).then((function(t){e.testResult=t.data;try{e.testResult.responseBody=JSON.parse(e.testResult.responseBody)}catch(a){}2e4===t.code?e.$notify({title:"成功",message:"请求成功",type:"success",duration:2e3}):e.$notify({title:"失败",message:t.message,type:"danger",duration:2e3})}))},testAndUpdate:function(){var e=this;Object(P["f"])(this.requestData).then((function(t){2e4===t.code?(e.$message({message:t.message,type:"success"}),Object(P["g"])(e.$route.query.id,e.requestData).then((function(t){2e4===t.code?e.$message({message:t.message,type:"success"}):e.$message.error(t.message)}))):e.$message.error(t.message)}))},resetCaeData:function(){this.caseData={id:void 0,caseNum:"",caseName:this.requestData.apiName,caseDesc:"",apiParams:this.requestData.apiParams,apiHeaders:this.requestData.apiHeaders,apiBody:this.requestData.apiBody,paramExtrat:this.requestData.paramExtrat,apiAssert:{type:this.assertActive,httpcode:null,responsecode:null,responseTime:null,fullMatch:null},createdUser:this.user,updatedUser:this.user,interface:this.$route.query.id}},handleCreateCase:function(){var e=this;this.resetCaeData(),this.dialogvisibleForm=!0,this.$nextTick((function(){e.$refs.caseDataForm.clearValidate()}))},createCase:function(){var e=this;this.$refs.caseDataForm.validate((function(t){t&&Object(R["a"])(e.caseData).then((function(t){2e4===t.code&&(e.dialogvisibleForm=!1,e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}))}))}))},handleConmand:function(e){"save"===e&&this.testAndUpdate()}}},I=B,F=(a("4489"),Object(p["a"])(I,f,v,!1,null,null,null)),z=F.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"operation-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleCreateCase}},[e._v("新增")])],1),a("el-table",{attrs:{data:e.list,size:"small"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"#"}}),a("el-table-column",{attrs:{label:"用例名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.caseName))]}}])}),a("el-table-column",{attrs:{label:"用例转台",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("formatStatus")(t.row.caseStatus)}},[e._v(e._s(e._f("showStatus")(t.row.caseStatus)))])]}}])}),a("el-table-column",{attrs:{label:"测试时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.startTime)))]}}])}),a("el-table-column",{attrs:{label:"创建者",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.created_User))]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleCaseTest(t.row)}}},[e._v("测试")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleCopyCase(t.row)}}},[e._v("复制")])]}}])})],1),a("el-pagination",{staticClass:"page",attrs:{background:"",layout:"sizes,prev, pager, next, total",total:e.total,"page-sizes":[10,20,50,100],"page-size":10},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),a("el-dialog",{staticClass:"create-case-dialog",attrs:{title:"测试用例",visible:e.dialogvisibleForm,width:"1200px"},on:{"update:visible":function(t){e.dialogvisibleForm=t}}},[a("el-form",{ref:"caseDataForm",attrs:{model:e.caseData,rules:e.caseDataRule,"label-position":"top"}},[a("el-form-item",{attrs:{label:"用例编号",prop:"caseNum"}},[a("el-input",{model:{value:e.caseData.caseNum,callback:function(t){e.$set(e.caseData,"caseNum",t)},expression:"caseData.caseNum"}})],1),a("el-form-item",{attrs:{label:"用例名称",prop:"caseName"}},[a("el-input",{model:{value:e.caseData.caseName,callback:function(t){e.$set(e.caseData,"caseName",t)},expression:"caseData.caseName"}})],1),a("el-form-item",{attrs:{label:"ApiPath"}},[a("el-input",{model:{value:e.requestData.apiPath,callback:function(t){e.$set(e.requestData,"apiPath",t)},expression:"requestData.apiPath"}},[a("el-select",{staticClass:"select-method",attrs:{slot:"prepend"},slot:"prepend",model:{value:e.requestData.apiMethod,callback:function(t){e.$set(e.requestData,"apiMethod",t)},expression:"requestData.apiMethod"}},e._l(e.methons,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-form-item",{attrs:{label:"请求参数"}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.caseActiveName,callback:function(t){e.caseActiveName=t},expression:"caseActiveName"}},[a("el-tab-pane",{attrs:{label:"Query参数",name:"first"}},[a("common",{attrs:{"request-data":e.caseData.apiParams}})],1),a("el-tab-pane",{attrs:{label:"请求头",name:"second"}},[a("common",{attrs:{"request-data":e.caseData.apiHeaders,lables:"header"}})],1),a("el-tab-pane",{attrs:{label:"请求体",name:"third"}},[a("common",{attrs:{"request-data":e.caseData.apiBody,lables:"body"}})],1)],1)],1),a("el-form-item",{attrs:{label:"断言"}},[a("div",{staticClass:"assert-style"},[a("div",{staticClass:"radio-style"},[a("el-radio-group",{model:{value:e.assertActive,callback:function(t){e.assertActive=t},expression:"assertActive"}},e._l(e.assertype,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("div",{staticClass:"select-assert"},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:101===e.assertActive,expression:"assertActive === 101"}],attrs:{label:"http状态码"}},[a("el-select",{model:{value:e.caseData.apiAssert.httpcode,callback:function(t){e.$set(e.caseData.apiAssert,"httpcode",t)},expression:"caseData.apiAssert.httpcode"}},e._l(e.httpcode,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:102===e.assertActive,expression:"assertActive === 102"}],attrs:{label:"响应code"}},[a("el-select",{model:{value:e.caseData.apiAssert.responsecode,callback:function(t){e.$set(e.caseData.apiAssert,"responsecode",t)},expression:"caseData.apiAssert.responsecode"}},e._l(e.respcode,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:103===e.assertActive,expression:"assertActive===103"}],attrs:{label:"匹配的值"}},[a("el-input",{model:{value:e.caseData.apiAssert.fullMatch,callback:function(t){e.$set(e.caseData.apiAssert,"fullMatch",t)},expression:"caseData.apiAssert.fullMatch"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:104===e.assertActive,expression:"assertActive===104"}],attrs:{label:"响应时间"}},[a("el-input",{model:{value:e.caseData.apiAssert.responseTime,callback:function(t){e.$set(e.caseData.apiAssert,"responseTime",t)},expression:"caseData.apiAssert.responseTime"}})],1)],1)])]),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.createCase}},[e._v("保存")]),a("el-button",{on:{click:e.handlecancelData}},[e._v("取消")])],1)],1)],1),a("el-dialog",{staticClass:"create-case-dialog",attrs:{title:"复制测试用例",visible:e.dialogvisibleCopy,width:"800px"},on:{"update:visible":function(t){e.dialogvisibleCopy=t}}},[a("el-form",{ref:"caseCopyData",attrs:{model:e.caseCopyData,rules:e.caseDataRule}},[a("el-form-item",{attrs:{label:"用例名称",prop:"caseName"}},[a("el-input",{model:{value:e.caseCopyData.caseName,callback:function(t){e.$set(e.caseCopyData,"caseName",t)},expression:"caseCopyData.caseName"}})],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.copyCase}},[e._v("保存")]),a("el-button",{on:{click:e.handlecancelCopy}},[e._v("取消")])],1)],1)],1)],1)},J=[],Q=(a("a9e3"),{name:"ApiCase",props:{list:Array,listQuery:Object,total:Number,fetchData:Function,testapiinfo:{type:Object,required:!0}},filters:{formatStatus:function(e){var t={101:null,102:"success",103:"danger",104:"warning",105:"info"};return t[e]},showStatus:function(e){var t={101:"unexecuted",102:"pass",103:"fail",104:"block",105:"closed"};return t[e]}},data:function(){return{methons:this.allEnums.requestMethod,assertype:this.allEnums.assertType,httpcode:this.allEnums.httpCode,respcode:this.allEnums.responseCode,assertActive:101,activeName:"first",caseActiveName:"first",responseName:"first",testResult:{},caseData:{id:void 0,caseNum:"",caseName:"",caseDesc:"",apiParams:null,apiHeaders:null,apiBody:null,apiAssert:{type:this.assertActive,httpcode:null,responsecode:null,responseTime:null,fullMatch:null},createdUser:this.user,updatedUser:this.user,interface:this.$route.query.id},caseDataRule:{caseName:[{required:!0,message:"请输入用例名称",trigger:"blur"}]},caseCopyData:{id:void 0,caseNum:"",caseName:""},dialogvisibleForm:!1,dialogvisibleCopy:!1}},computed:{requestData:function(){var e=this.testapiinfo;return null===e.apiParams&&(e.apiParams=[{param:null,desc:null,type:"String",value:null}]),null===e.apiHeaders&&(e.apiHeaders=[{param:null,desc:null,type:"String",value:null}]),null===e.apiBody&&(e.apiBody=[{param:null,desc:null,type:"String",value:null}]),e},user:function(){return Object(T["a"])()}},created:function(){},methods:{indexMethod:function(e){return(this.listQuery.page-1)*this.listQuery.size+(e+1)},handleCurrentChange:function(e){this.listQuery.page=e,this.fetchData()},handleSizeChange:function(e){this.listQuery.size=e,this.fetchData()},resetCaeData:function(){this.caseData={id:void 0,caseNum:"",caseName:this.requestData.apiName,caseDesc:"",apiParams:this.requestData.apiParams,apiHeaders:this.requestData.apiHeaders,apiBody:this.requestData.apiBody,apiAssert:{type:this.assertActive,httpcode:null,responsecode:null,responseTime:null,fullMatch:null},createdUser:this.user,updatedUser:this.user,interface:this.$route.query.id}},resetCaseCopy:function(){this.caseCopyData={id:void 0,caseNum:"",caseName:""}},handleCreateCase:function(){var e=this;this.resetCaeData(),this.dialogvisibleForm=!0,this.$nextTick((function(){e.$refs.caseDataForm.clearValidate()}))},createCase:function(){var e=this;this.$refs.caseDataForm.validate((function(t){t&&Object(R["a"])(e.caseData).then((function(t){2e4===t.code&&(e.dialogvisibleForm=!1,e.fetchData(),e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}))}))}))},copyCase:function(){var e=this;this.$refs.caseCopyData.validate((function(t){if(t){var a=Object.assign({},e.caseCopyData);Object(R["b"])(a).then((function(t){2e4===t.code&&(e.dialogvisibleCopy=!1,e.fetchData(),e.$notify({title:"成功",message:"复制成功",type:"success",duration:2e3}))}))}}))},handleCopyCase:function(e){var t=this;this.caseCopyData=Object.assign({},e),this.caseCopyData.caseName="副本-"+e.caseName,this.dialogvisibleCopy=!0,this.$nextTick((function(){t.$refs.caseCopyData.clearValidate()}))},handlecancelCopy:function(){this.resetCaseCopy(),this.dialogvisibleCopy=!1},handlecancelData:function(){this.resetCaeData(),this.dialogvisibleForm=!1},handleCaseTest:function(e){var t=this;console.log(e),Object(R["j"])({caseId:e.id}).then((function(e){2e4===e.code&&t.$message({message:e.message,type:"success"})}))}}}),U=Q,V=Object(p["a"])(U,H,J,!1,null,"6217f830",null),L=V.exports,G={name:"detail",components:{ApiDesc:m,ApiTest:z,ApiCase:L},data:function(){return{apiInfomation:{},apiId:this.$route.query.id,activeName:"first",response:{},testapiinfo:{},funccase:null,total:0,list:null,listLoading:!0,listQuery:{page:1,size:10,interface:this.$route.query.id}}},created:function(){this.getApiInfo()},methods:{getApiInfo:function(){var e=this;Object(P["h"])(this.apiId).then((function(t){e.apiInfomation=t.data;try{e.response=JSON.parse(e.apiInfomation.apiResponse)}catch(a){e.response=e.apiInfomation.apiResponse}}))},fetchData:function(){var e=this;this.listLoading=!0,Object(R["e"])(this.listQuery).then((function(t){e.list=t.data.results,e.total=t.data.count,e.listLoading=!1}))},getcaseinfo:function(e){this.funccase=e},testApiInfo:function(){var e=this;Object(P["h"])(this.apiId).then((function(t){e.testapiinfo=t.data,console.log(e.testapiinfo)}))},handleClick:function(e,t){"first"===e.name?this.getApiInfo():"second"===e.name?this.testApiInfo():"third"===e.name&&this.fetchData()}}},K=G,W=Object(p["a"])(K,s,l,!1,null,"3e5ba83c",null);t["default"]=W.exports},6581:function(e,t,a){"use strict";var s=a("33da"),l=a.n(s);l.a},"66a0":function(e,t,a){},9908:function(e,t,a){},f271:function(e,t,a){"use strict";var s=a("9908"),l=a.n(s);l.a}}]);