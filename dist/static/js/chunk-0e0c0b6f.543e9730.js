(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e0c0b6f"],{"707c":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"project-container"},[r("div",{staticClass:"operation-container"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleCreate}},[e._v("新增")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,stripe:"",size:"small"}},[r("el-table-column",{attrs:{align:"center",label:"#",width:"65px  ",index:e.indexMethod,type:"index"}}),r("el-table-column",{attrs:{label:"项目名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{on:{click:function(r){return e.handlerowclick(t.row)}}},[e._v(e._s(t.row.projectName))])]}}])}),r("el-table-column",{attrs:{label:"项目地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.projectUrl))]}}])}),r("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.createdTime)))]}}])}),r("el-table-column",{attrs:{label:"更新时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.updatedTime)))]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleUpdate(o)}}},[e._v("编辑")]),r("el-button",{staticStyle:{color:"#f95359"},attrs:{type:"text"},on:{click:function(t){return e.deleteProject(o)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total",total:e.total},on:{"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:e.titleMap[e.dialogvisibleTitle],visible:e.dialogvisibleForm,width:"800px"},on:{"update:visible":function(t){e.dialogvisibleForm=t}}},[r("el-form",{ref:"ruleform",attrs:{model:e.projectForm,rules:e.projectrule,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"项目名称:",prop:"projectName"}},[r("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.projectForm.projectName,callback:function(t){e.$set(e.projectForm,"projectName",t)},expression:"projectForm.projectName"}})],1),r("el-form-item",{attrs:{label:"项目地址:",prop:"projectUrl"}},[r("el-input",{attrs:{placeholder:"请输入项目地址"},model:{value:e.projectForm.projectUrl,callback:function(t){e.$set(e.projectForm,"projectUrl",t)},expression:"projectForm.projectUrl"}})],1),r("el-form-item",{attrs:{label:"项目描述:",prop:"projectDesc"}},[r("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",placeholder:"请输入项目描述",autosize:""},model:{value:e.projectForm.projectDesc,callback:function(t){e.$set(e.projectForm,"projectDesc",t)},expression:"projectForm.projectDesc"}})],1),r("el-form-item",{staticStyle:{"text-align":"left"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){"created"===e.dialogvisibleTitle?e.createdProject():e.updatedProject()}}},[e._v("保存")]),r("el-button",{on:{click:e.handlecancel}},[e._v("取消")])],1)],1)],1)],1)},i=[],a=r("24d2"),l=r("fa20"),n={name:"project",inject:["reload"],computed:{user:function(){return Object(l["b"])()}},data:function(){return{list:null,listLoading:!0,total:0,listQuery:{page:1,size:10},dialogvisibleTitle:null,dialogvisibleForm:!1,titleMap:{updated:"编辑项目",created:"创建项目"},projectForm:{id:void 0,projectName:"",projectDesc:"",projectUrl:"",projectEnv:"",person:this.user},projectrule:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],projectUrl:[{required:!0,message:"请输入项目地址",trigger:"blur"}]}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,Object(a["c"])(this.listQuery).then((function(t){e.list=t.data.results,e.total=t.data.count,e.listLoading=!1}))},resetprojectform:function(){this.projectForm={id:void 0,projectName:"",projectDesc:"",projectUrl:"",projectEnv:"",person:this.user}},handleCreate:function(){var e=this;this.resetprojectform(),this.dialogvisibleTitle="created",this.dialogvisibleForm=!0,this.$nextTick((function(){e.$refs.ruleform.clearValidate()}))},handleUpdate:function(e){var t=this;this.projectForm=Object.assign({},e),this.dialogvisibleTitle="updated",this.dialogvisibleForm=!0,this.$nextTick((function(){t.$refs.ruleform.clearValidate()}))},createdProject:function(){var e=this;this.$refs.ruleform.validate((function(t){t&&Object(a["a"])(e.projectForm).then((function(t){e.dialogvisibleForm=!1,e.fetchData(),location.reload(),e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3})}))}))},updatedProject:function(){var e=this;this.$refs.ruleform.validate((function(t){if(t){var r=Object.assign({},e.projectForm);Object(a["d"])(r.id,r).then((function(t){e.dialogvisibleForm=!1,e.fetchData(),location.reload(),e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3})}))}}))},deleteProject:function(e){var t=this;this.$confirm("确定要删除该数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(r){Object(a["b"])(e.id).then((function(e){t.fetchData(),location.reload(),t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})}))})).catch((function(e){}))},indexMethod:function(e){return(this.listQuery.page-1)*this.listQuery.size+(e+1)},handleCurrentChange:function(e){this.listQuery.page=e,this.fetchData()},handlecancel:function(){this.resetprojectform(),this.dialogvisibleForm=!1},handlerowclick:function(e){this.$router.push({name:"System",query:{id:e.id,name:e.projectName}})}}},c=n,s=(r("dca5"),r("2877")),u=Object(s["a"])(c,o,i,!1,null,"931dcff0",null);t["default"]=u.exports},dca5:function(e,t,r){"use strict";var o=r("dd20"),i=r.n(o);i.a},dd20:function(e,t,r){}}]);